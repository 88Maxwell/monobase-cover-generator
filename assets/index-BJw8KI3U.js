(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var e=document.getElementById(`form`),t=document.getElementById(`file`),n=document.getElementById(`canvas`),r=n.getContext(`2d`),i=document.getElementById(`save`),a=document.getElementById(`clear`),o=20;e.addEventListener(`submit`,e=>{e.preventDefault();let a=t.files[0];if(!a)return;let s=Number(document.getElementById(`width`).value),c=Number(document.getElementById(`height`).value),l=new Image;l.src=URL.createObjectURL(a),l.onload=()=>{n.width=s,n.height=c,n.style.display=`block`,i.style.display=`inline-block`,r.clearRect(0,0,s,c);let e=Math.max(s/l.naturalWidth,c/l.naturalHeight),t=l.naturalWidth*e,a=l.naturalHeight*e,u=(s-t)/2,d=(c-a)/2;r.drawImage(l,u,d,t,a);let f=o,p=o,m=s-o*2,h=c-o*2,g=document.createElement(`canvas`);g.width=m,g.height=h;let _=g.getContext(`2d`);_.filter=`blur(14px)`,_.drawImage(l,(f-u)/e,(p-d)/e,m/e,h/e,0,0,m,h),_.filter=`none`,r.save(),r.beginPath(),r.moveTo(f+20,p),r.arcTo(f+m,p,f+m,p+h,20),r.arcTo(f+m,p+h,f,p+h,20),r.arcTo(f,p+h,f,p,20),r.arcTo(f,p,f+m,p,20),r.closePath(),r.clip(),r.drawImage(g,f,p);let v=document.getElementById(`opacity`);r.fillStyle=`rgba(255,255,255,${Math.min(Math.max(parseFloat(v.value)||.28,0),1)})`,r.fillRect(f,p,m,h),r.restore(),r.beginPath(),r.moveTo(f+20,p),r.arcTo(f+m,p,f+m,p+h,20),r.arcTo(f+m,p+h,f,p+h,20),r.arcTo(f,p+h,f,p,20),r.arcTo(f,p,f+m,p,20),r.closePath(),r.strokeStyle=`rgba(255,255,255,0.8)`,r.lineWidth=1,r.stroke(),URL.revokeObjectURL(l.src)}}),i.addEventListener(`click`,()=>{let e=document.createElement(`a`);e.download=`monobase-cover.png`,e.href=n.toDataURL(`image/png`),e.click()}),a.addEventListener(`click`,()=>{t.value=``,r.clearRect(0,0,n.width,n.height),n.style.display=`none`,i.style.display=`none`,a.style.display=`none`}),t.addEventListener(`change`,()=>{t.files.length>0?a.style.display=`inline-block`:a.style.display=`none`});